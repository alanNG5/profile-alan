<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="description" content="My Portfolio">
    <meta name="keywords" content="Demo watch e-store">
    <meta name="author" content="Alan Ng">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Impetus Display</title>
    <link rel="icon" type="image/x-icon" href="./images/briefcase.svg">
    <link rel="stylesheet" href="./css/reset.css">
    <link rel="stylesheet" href="./css/frame.css">
    <link rel="stylesheet" href="./css/about.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <style>
    </style>
</head>

<body>
    <header>
        <div class="navbar style-for-centering">
            <a href="watch_main.html">
                <div class="logo">
                    <img src="images/logoIMP.png" alt="logo">
                    <span>WATCH STORE</span>
                </div>
            </a>
            <ul id="navList">
                <li><a href="watch_main.html" >Home</a></li>
                <li><a href="catalogue.html">Catalogue</a></li>
                <li><a href="about.html" class="active">About</a></li>
                <li><a href="index.html">Back to CV</a></li>
            </ul>

            <div>
                <button id="login-btn">Login</button>
                <div id="user-info">
                    <i class='bx bxs-user-circle'></i>
                    <span id="role-info">role</span>
                    <span> | </span>
                    <strong id="name-info">name</strong>
                    <div id="user-action" hidden >
                        <div>
                            <button id="panel-btn"></button>
                            <button id="logout-btn">Logout</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="toggle-btn" id="toggleBtn">
                <div class="bar"></div>
                <div class="bar"></div>
                <div class="bar"></div>
            </div>
        </div>
    </header>


    <aside id="aside-nav">
        <div data-index="0">Features</div>
        <div data-index="1">ERD</div>
        <div data-index="2"><span>Improvement</span><span>Plans</span></div>
    </aside>

    <main class="view-container">

        <div class="about-this">
            <h4>Welcome! This web page is designed for demonstration and practice. Here, you can easily create a non-admin account or log into an admin account to explore advanced features. The main programming languages used include:</h4>
            <!-- <h4>Dive into our interactive programs built using various programming languages, and discover what you can create!</h4> -->
            <div class="pg-lang">
                <img src="images/languages/nodejs.svg" alt="node.JS"/>
                <img src="images/languages/javascript.svg" alt="JavaScript"/>
                <img src="images/languages/typescript.svg" alt="TypeScript"/>
                <img src="images/languages/postgresql.svg" alt="PSQL"/>
                <div><img src="images/languages/knex.svg" alt="knex"/></div>
            </div>
        </div>

        <article>
            <h2>Features of the Web App</h2>
            <ol>
                <li><b>Responsive Design:</b> The website is built using responsive web design principles, adapting to screen widths from at least 300px up to a maximum of 1920px.</li>
                <li><b>Authentication:</b> User passwords are hashed using the "bcrypt" library to enhance security.</li>
                <li><b>Input Validation:</b> Frontend input validation is implemented using regular expressions during user registration. Checks for duplicate usernames and emails are handled on the backend.</li>
                <li><b>Error Messaging:</b> A generic error message, "Invalid password or username," appears for login errors, no matter which input field is invalid. This approach prevents user from discovering other valid usernames through failed login attempts. If the server's response messages are specified as "Username not found" and "Invalid password" resulting from corresponding input error, security risk rises as the user can get more information about other account.</li>
                <li><b>Sales Transactions:</b> Stock quantity is adjusted with new sales, and both inserting new sales and updating stock are conducted within the same transaction. This ensures atomicity, a key principle of the ACID database model. If the process fails, a rollback is initiated.</li>
                <li><b>Out-of-Stock Products:</b> When a product is out of stock, database queries block the item information from being fetched and displayed. Additionally, an extra check for stock availability is performed before submitting the sales form to prevent the scenario where multiple users purchase the same item simultaneously, which could lead to negative stock levels.</li>
                <li><b>Memory Management:</b> To address memory leaks associated with express-session, the "memorystore" npm package is utilized.</li>
                <li><b>Date Handling:</b> Dates are processed on the frontend after receiving responses from the database, allowing timestamps to be adjusted based on the client's local format or formatted as specified. This approach helps prevent inaccurate date displays caused by UTC timezone differences and varying date standards across different computers.</li>
                <li><b>Dynamic Reporting:</b> In the admin report, consecutive months that cross years are handled dynamically rather than through hard coding.</li>
            </ol>
        </article>

        <article>
            <h2>Entity Relationship Diagram for SQL</h2>
            <img src="images/impetus-erd.png" class="erd-img"/>
            <p>Remarks: </p>
            <div class="erd-remark">
                <img src="images/relationship_erd.png">
                <p>The shape of endpoints of the lines signify the status of primary or foreign key under one-to-one or one-to-many relationships among the tables.</p>
            </div>
        </article>

        <article>
            <h2>Further Improvement</h2>
            <p>This web app is developed based on the concept of Minimum Viable Product (MVP) as additional features and improvement will be sustained to deploy. Any other suggestion are welcome via <a href="mailto:ng_lc5@hotmail.com"  target="_top">my email box</a>. And these plans are listed as follows: </p>
            <ol>
                <li><b>Features to be Added:</b>
                    <ol>
                        <li>Generation of PDF files for users to download sales reports.</li>
                        <li>A user wishlist and shopping cart functionality.</li>
                        <li>Introduction of pre-owned (secondhand) as a product type, with potential normalization and restructuring of tables and columns.</li>
                        <li>A comment section for both products and the website</li>
                        <li>A goods return feature, including tables and routes related to returns and stock management.</li>
                        <li>Utilization of a trained AI model to assess whether images uploaded from admin account on the product creation page meet the requirements for image shape and clear background. The TensorFlow API maybe adopted for model training.</li>
                    </ol>
                </li>
                <li><b>Performance Improvements:</b>
                    <ol>
                        <li>To minimise the amount of using "addEventListeners". Utilising event delegation as an alternative to capture event.</li>
                        <li>Replace "appendChild() + innerHTML/textContent" with "insertAdjacentHTML()" to avoid the serialization and reparsing of existing content in target elements, allowing new elements to be added without reparsing.</li>
                    </ol>
                </li>
                <li><b>Memory Management:</b>
                    <ol>
                        <li>Replace "memorystore" with the "connect-pg-simple" npm package to handle memory leaks. This package stores sessions in a PostgreSQL database, making it more suitable for production, better at scaling, and capable of persisting session data across server restarts. Since "pg" is required for the connection pool, Knex configuration may need to be set up again.</li>
                    </ol>
                </li>
                <li><b>Error Handling:</b>
                    <ol>
                        <li>Reduce reliance on "try-catch" blocks by using Promises for more effective error handling.</li>
                    </ol>
                </li>
            </ol>
        </article>

        <article>Thank You!</article>
    </main>


    <div id="login-modal" class="modal">
        <img src="images/dm101.png" class="img-demo-ac-pw"/>

        <div class="modal-content">
            <span id="close" class="x-cl-btn">&times;</span>

            <div class="form-container form-login">
                <h1>Login</h1>
                <form id="login-form" action="/user/login" method="POST">

                    <div class="input-box">
                        <input type="text" name="username" placeholder="Username" minlength="6" required/>
                        <i class='bx bxs-user'></i>
                    </div>

                    <div class="input-box">
                        <input type="password" name="password" placeholder="Password" minlength="6" required/>
                        <i class='bx bxs-lock-alt' ></i>
                    </div>

                    <input type="submit" class="submit-btn" value="Login">

                    <div class="account-status">
                        <p>Don't have an account? <a href="#" id="register-link">Register Now</a></p>
                    </div>
                </form>
            </div>

            <div class="form-container  form-register">
                <h1>Register</h1>
                <form id="register-form" action="/user/register" method="POST">
                    <div class="input-box">
                        <input type="text" name="username" placeholder="Username" minlength="6" pattern="[a-zA-Z0-9]{6,14}$" title="Must contain either digit or letter, with a length between 6 and 14 characters" required/>
                        <i class='bx bxs-user'></i>
                    </div>

                    <div class="input-box">
                        <input type="email" name="email" placeholder="Email" pattern="[a-z0-9._%+\-]+@[a-z0-9.\-]+\.[a-z]{2,}$" title="Must be email format. '@' and '.' should appear" required/>
                        <i class='bx bx-envelope'></i>
                    </div>

                    <div class="input-box">
                        <input type="password" name="password" placeholder="Password" minlength="6" pattern="^(?=.*[0-9])(?=.*[a-zA-Z])[a-zA-Z0-9]{6,}$" title="Must contain at least 1 digit and 1 letter, and not contain character other than digit and letter, and at least 6 or more characters" required/>
                        <i class='bx bxs-lock-alt' ></i>
                    </div>

                    <input type="submit" class="submit-btn" value="Register">

                    <div class="account-status">
                        <p>Already have an account? <a href="#" id="login-link">Login</a></p>
                    </div>
                </form>
            </div>

        </div>
    </div>

    <div id="logout-modal" class="modal">
        <div class="modal-content">
            <div class="form-container">
                <h3>Are you sure to logout?</h3>
                <form id="logout-form" action="/user/logout" method="POST">
                    <input type="submit" value="Logout">
                    <div id="cancel-logout">Stay Logged In</div>
                </form>
            </div>
        </div>
    </div>

    <footer>
        <abbr title="FOR DEMO ONLY">
            <ul class="social-icon">
                <li class="social-icon__item">
                    <a class="social-icon__link">
                        <ion-icon name="logo-facebook"></ion-icon>
                    </a></li>
                <li class="social-icon__item">
                    <a class="social-icon__link">
                        <ion-icon name="logo-whatsapp"></ion-icon>
                    </a></li>
                <li class="social-icon__item">
                    <a class="social-icon__link">
                        <ion-icon name="logo-linkedin"></ion-icon>
                    </a></li>
                <li class="social-icon__item">
                    <a class="social-icon__link">
                        <ion-icon name="logo-instagram"></ion-icon>
                    </a>
                </li>
            </ul>
        </abbr>
        <p>&copy;2024 Alan Ng | Portfolio | All Rights Reserved</p>
    </footer>


    <div class="back-btn"><a href="index.html">
        <i class="bx bx-left-arrow-circle"></i>

        <svg height="100%" width="100%" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 297.00 297.00" xml:space="preserve" fill="#000000" stroke="#000000" stroke-width="0.00297" transform="rotate(0)matrix(1, 0, 0, 1, 0, 0)">

                <g id="SVGRepo_bgCarrier" stroke-width="0"/>

                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" stroke="#CCCCCC" stroke-width="1.1880000000000002"/>

                <g id="SVGRepo_iconCarrier"> <g> <g> <g> <g> <circle style="fill:#24ebf9;" cx="148.5" cy="148.5" r="148.5"/> </g> </g> </g> <path style="fill:#0f8bff;" d="M179.023,37.423l-61.089,222.025l37.389,37.389c76.627-3.466,138.118-64.999,141.52-141.642 L179.023,37.423z"/> <g> <path style="fill:#32373B;" d="M127.083,264h42.833c6.397,0,11.583-5.186,11.583-11.583V44.583 c0-6.397-5.186-11.583-11.583-11.583h-42.833c-6.397,0-11.584,5.186-11.584,11.583v207.833C115.5,258.814,120.686,264,127.083,264 z"/> </g> <g> <circle style="fill:#fcf41d;" cx="148.5" cy="148.5" r="59.5"/> </g> <g> <circle style="fill:#3f403b;" cx="148.5" cy="148.5" r="49.5"/> </g> </g> </g>

        </svg></a>
    </div>

<!-- CDN for popup-->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>

<script src="./js/general.js"></script>
<script src="./js/auth.js"></script>
<script src="./js/about.js"></script>

<script>
</script>
</body>
</html>
